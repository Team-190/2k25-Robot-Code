digraph Superstructure {
  /*
   * Graphviz DOT file for the superstructure state machine.
   * States are represented as nodes, and transitions are represented as edges.
   */

  // Node definitions
  START
  STOW_DOWN
  GROUND_ACQUISITION
  GROUND_INTAKE
  L1
  L2
  L3
  L4
  L1_SCORE
  L2_SCORE
  L3_SCORE
  L4_SCORE
  HANDOFF
  INTERMEDIATE_WAIT_FOR_ELEVATOR
  INTERMEDIATE_WAIT_FOR_ARM
  STOW_UP
  L2_ALGAE
  L2_ALGAE_INTAKE
  L3_ALGAE
  L3_ALGAE_INTAKE
  PROCESSOR
  PROCESSOR_SCORE
  BARGE
  BARGE_SCORE

  // Edge definitions (All-to-all pairing)
  START -> STOW_DOWN

  STOW_DOWN -> GROUND_ACQUISITION [label = "coordinated motion"]
  STOW_DOWN -> L1 [label = "coordinated motion"]
  STOW_DOWN -> L2
  STOW_DOWN -> L3
  STOW_DOWN -> L4
  STOW_DOWN -> HANDOFF [label = "coordinated motion"]
  STOW_DOWN -> INTERMEDIATE_WAIT_FOR_ELEVATOR
  STOW_DOWN -> INTERMEDIATE_WAIT_FOR_ARM
  STOW_DOWN -> STOW_UP
  STOW_DOWN -> L2_ALGAE
  STOW_DOWN -> L3_ALGAE
  STOW_DOWN -> PROCESSOR
  STOW_DOWN -> BARGE

  GROUND_ACQUISITION -> STOW_DOWN
  GROUND_ACQUISITION -> GROUND_INTAKE
  GROUND_ACQUISITION -> L1
  GROUND_ACQUISITION -> L2
  GROUND_ACQUISITION -> L3
  GROUND_ACQUISITION -> L4
  GROUND_ACQUISITION -> HANDOFF
  GROUND_ACQUISITION -> INTERMEDIATE_WAIT_FOR_ELEVATOR
  GROUND_ACQUISITION -> INTERMEDIATE_WAIT_FOR_ARM
  GROUND_ACQUISITION -> STOW_UP
  GROUND_ACQUISITION -> L2_ALGAE
  GROUND_ACQUISITION -> L3_ALGAE
  GROUND_ACQUISITION -> PROCESSOR
  GROUND_ACQUISITION -> BARGE

  GROUND_INTAKE -> STOW_DOWN
  GROUND_INTAKE -> GROUND_ACQUISITION
  GROUND_INTAKE -> L1
  GROUND_INTAKE -> L2
  GROUND_INTAKE -> L3
  GROUND_INTAKE -> L4
  GROUND_INTAKE -> HANDOFF
  GROUND_INTAKE -> INTERMEDIATE_WAIT_FOR_ELEVATOR
  GROUND_INTAKE -> INTERMEDIATE_WAIT_FOR_ARM
  GROUND_INTAKE -> STOW_UP
  GROUND_INTAKE -> L2_ALGAE
  GROUND_INTAKE -> L3_ALGAE
  GROUND_INTAKE -> PROCESSOR
  GROUND_INTAKE -> BARGE

  L1 -> STOW_DOWN
  L1 -> GROUND_ACQUISITION
  L1 -> L2
  L1 -> L3
  L1 -> L4
  L1 -> L1_SCORE
  L1 -> HANDOFF
  L1 -> INTERMEDIATE_WAIT_FOR_ELEVATOR
  L1 -> INTERMEDIATE_WAIT_FOR_ARM
  L1 -> STOW_UP
  L1 -> L2_ALGAE
  L1 -> L3_ALGAE
  L1 -> PROCESSOR
  L1 -> BARGE

  L2 -> STOW_DOWN
  L2 -> GROUND_ACQUISITION
  L2 -> L1
  L2 -> L3
  L2 -> L4
  L2 -> L2_SCORE
  L2 -> HANDOFF
  L2 -> INTERMEDIATE_WAIT_FOR_ELEVATOR
  L2 -> INTERMEDIATE_WAIT_FOR_ARM
  L2 -> STOW_UP
  L2 -> L2_ALGAE
  L2 -> L3_ALGAE
  L2 -> PROCESSOR
  L2 -> BARGE

  L3 -> STOW_DOWN
  L3 -> GROUND_ACQUISITION
  L3 -> L1
  L3 -> L2
  L3 -> L4
  L3 -> L3_SCORE
  L3 -> HANDOFF
  L3 -> INTERMEDIATE_WAIT_FOR_ELEVATOR
  L3 -> INTERMEDIATE_WAIT_FOR_ARM
  L3 -> STOW_UP
  L3 -> L2_ALGAE
  L3 -> L3_ALGAE
  L3 -> PROCESSOR
  L3 -> BARGE

  L4 -> START
  L4 -> STOW_DOWN
  L4 -> GROUND_ACQUISITION
  L4 -> L1
  L4 -> L2
  L4 -> L3
  L4 -> L4_SCORE
  L4 -> HANDOFF
  L4 -> INTERMEDIATE_WAIT_FOR_ELEVATOR
  L4 -> INTERMEDIATE_WAIT_FOR_ARM
  L4 -> STOW_UP
  L4 -> L2_ALGAE
  L4 -> L3_ALGAE
  L4 -> PROCESSOR
  L4 -> BARGE

  L1_SCORE -> GROUND_ACQUISITION

  L2_SCORE -> STOW_DOWN
  L2_SCORE -> GROUND_ACQUISITION
  L2_SCORE -> L1
  L2_SCORE -> L2
  L2_SCORE -> L3
  L2_SCORE -> L4
  L2_SCORE -> HANDOFF
  L2_SCORE -> INTERMEDIATE_WAIT_FOR_ELEVATOR
  L2_SCORE -> INTERMEDIATE_WAIT_FOR_ARM
  L2_SCORE -> STOW_UP
  L2_SCORE -> L2_ALGAE
  L2_SCORE -> L3_ALGAE
  L2_SCORE -> PROCESSOR
  L2_SCORE -> BARGE

  L3_SCORE -> STOW_DOWN
  L3_SCORE -> GROUND_ACQUISITION
  L3_SCORE -> L1
  L3_SCORE -> L2
  L3_SCORE -> L3
  L3_SCORE -> L4
  L3_SCORE -> HANDOFF
  L3_SCORE -> INTERMEDIATE_WAIT_FOR_ELEVATOR
  L3_SCORE -> INTERMEDIATE_WAIT_FOR_ARM
  L3_SCORE -> STOW_UP
  L3_SCORE -> L2_ALGAE
  L3_SCORE -> L3_ALGAE
  L3_SCORE -> PROCESSOR
  L3_SCORE -> BARGE

  L4_SCORE -> STOW_DOWN
  L4_SCORE -> GROUND_ACQUISITION
  L4_SCORE -> L1
  L4_SCORE -> L2
  L4_SCORE -> L3
  L4_SCORE -> L4
  L4_SCORE -> HANDOFF
  L4_SCORE -> INTERMEDIATE_WAIT_FOR_ELEVATOR
  L4_SCORE -> INTERMEDIATE_WAIT_FOR_ARM
  L4_SCORE -> STOW_UP
  L4_SCORE -> L2_ALGAE
  L4_SCORE -> L3_ALGAE
  L4_SCORE -> PROCESSOR
  L4_SCORE -> BARGE

  HANDOFF -> STOW_DOWN [label = "coordinated motion"]
  HANDOFF -> GROUND_ACQUISITION
  HANDOFF -> L1
  HANDOFF -> L2
  HANDOFF -> L3
  HANDOFF -> L4
  HANDOFF -> INTERMEDIATE_WAIT_FOR_ELEVATOR
  HANDOFF -> INTERMEDIATE_WAIT_FOR_ARM
  HANDOFF -> STOW_UP
  HANDOFF -> L2_ALGAE
  HANDOFF -> L3_ALGAE
  HANDOFF -> PROCESSOR
  HANDOFF -> BARGE

  INTERMEDIATE_WAIT_FOR_ELEVATOR -> STOW_DOWN
  INTERMEDIATE_WAIT_FOR_ELEVATOR -> GROUND_ACQUISITION
  INTERMEDIATE_WAIT_FOR_ELEVATOR -> L1
  INTERMEDIATE_WAIT_FOR_ELEVATOR -> L2
  INTERMEDIATE_WAIT_FOR_ELEVATOR -> L3
  INTERMEDIATE_WAIT_FOR_ELEVATOR -> L4
  INTERMEDIATE_WAIT_FOR_ELEVATOR -> HANDOFF
  INTERMEDIATE_WAIT_FOR_ELEVATOR -> INTERMEDIATE_WAIT_FOR_ARM
  INTERMEDIATE_WAIT_FOR_ELEVATOR -> STOW_UP
  INTERMEDIATE_WAIT_FOR_ELEVATOR -> L2_ALGAE
  INTERMEDIATE_WAIT_FOR_ELEVATOR -> L3_ALGAE
  INTERMEDIATE_WAIT_FOR_ELEVATOR -> PROCESSOR
  INTERMEDIATE_WAIT_FOR_ELEVATOR -> BARGE

  INTERMEDIATE_WAIT_FOR_ARM -> STOW_DOWN
  INTERMEDIATE_WAIT_FOR_ARM -> GROUND_ACQUISITION
  INTERMEDIATE_WAIT_FOR_ARM -> L1
  INTERMEDIATE_WAIT_FOR_ARM -> L2
  INTERMEDIATE_WAIT_FOR_ARM -> L3
  INTERMEDIATE_WAIT_FOR_ARM -> L4
  INTERMEDIATE_WAIT_FOR_ARM -> HANDOFF
  INTERMEDIATE_WAIT_FOR_ARM -> INTERMEDIATE_WAIT_FOR_ELEVATOR
  INTERMEDIATE_WAIT_FOR_ARM -> STOW_UP
  INTERMEDIATE_WAIT_FOR_ARM -> L2_ALGAE
  INTERMEDIATE_WAIT_FOR_ARM -> L3_ALGAE
  INTERMEDIATE_WAIT_FOR_ARM -> PROCESSOR
  INTERMEDIATE_WAIT_FOR_ARM -> BARGE

  STOW_UP -> STOW_DOWN
  STOW_UP -> GROUND_ACQUISITION [label = "coordinated motion"]
  STOW_UP -> L1 [label = "coordinated motion"]
  STOW_UP -> L2
  STOW_UP -> L3
  STOW_UP -> L4
  STOW_UP -> HANDOFF [label = "coordinated motion"]
  STOW_UP -> INTERMEDIATE_WAIT_FOR_ELEVATOR
  STOW_UP -> INTERMEDIATE_WAIT_FOR_ARM
  STOW_UP -> L2_ALGAE
  STOW_UP -> L3_ALGAE
  STOW_UP -> PROCESSOR
  STOW_UP -> BARGE

  L2_ALGAE -> STOW_DOWN [label = "no algae"]
  L2_ALGAE -> GROUND_ACQUISITION [label = "no algae"]
  L2_ALGAE -> L1 [label = "no algae"]
  L2_ALGAE -> L2 
  L2_ALGAE -> L3
  L2_ALGAE -> L4
  L2_ALGAE -> HANDOFF [label = "no algae"]
  L2_ALGAE -> INTERMEDIATE_WAIT_FOR_ELEVATOR
  L2_ALGAE -> INTERMEDIATE_WAIT_FOR_ARM
  L2_ALGAE -> STOW_UP
  L2_ALGAE -> L2_ALGAE_INTAKE
  L2_ALGAE -> L3_ALGAE [label = "no algae"]
  L2_ALGAE -> PROCESSOR
  L2_ALGAE -> BARGE

  L2_ALGAE_INTAKE -> STOW_UP
  L2_ALGAE_INTAKE -> L2_ALGAE

  L3_ALGAE -> STOW_DOWN [label = "no algae"]
  L3_ALGAE -> GROUND_ACQUISITION [label = "no algae"]
  L3_ALGAE -> L1 [label = "no algae"]
  L3_ALGAE -> L2
  L3_ALGAE -> L3
  L3_ALGAE -> L4
  L3_ALGAE -> HANDOFF [label = "no algae"]
  L3_ALGAE -> INTERMEDIATE_WAIT_FOR_ELEVATOR
  L3_ALGAE -> INTERMEDIATE_WAIT_FOR_ARM
  L3_ALGAE -> STOW_UP
  L3_ALGAE -> L2_ALGAE [label = "no algae"]
  L3_ALGAE -> L3_ALGAE_INTAKE
  L3_ALGAE -> PROCESSOR
  L3_ALGAE -> BARGE

  L3_ALGAE_INTAKE -> STOW_UP
  L3_ALGAE_INTAKE -> L3_ALGAE

  PROCESSOR -> STOW_DOWN [label = "no algae"]
  PROCESSOR -> GROUND_ACQUISITION [label = "no algae"]
  PROCESSOR -> L1 [label = "no algae"]
  PROCESSOR -> L2
  PROCESSOR -> L3
  PROCESSOR -> L4
  PROCESSOR -> HANDOFF [label = "no algae"]
  PROCESSOR -> INTERMEDIATE_WAIT_FOR_ELEVATOR
  PROCESSOR -> INTERMEDIATE_WAIT_FOR_ARM
  PROCESSOR -> STOW_UP
  PROCESSOR -> L2_ALGAE
  PROCESSOR -> L3_ALGAE
  PROCESSOR -> PROCESSOR_SCORE
  PROCESSOR -> BARGE

  PROCESSOR_SCORE -> PROCESSOR

  BARGE -> STOW_DOWN
  BARGE -> GROUND_ACQUISITION
  BARGE -> L1
  BARGE -> L2
  BARGE -> L3
  BARGE -> L4
  BARGE -> HANDOFF
  BARGE -> INTERMEDIATE_WAIT_FOR_ELEVATOR
  BARGE -> INTERMEDIATE_WAIT_FOR_ARM
  BARGE -> STOW_UP
  BARGE -> L2_ALGAE
  BARGE -> L3_ALGAE
  BARGE -> PROCESSOR
  BARGE -> BARGE_SCORE
  
  BARGE_SCORE -> BARGE
}